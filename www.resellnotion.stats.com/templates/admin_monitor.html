<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Monitor Admin</title>
    <style>
        body { background: #0f172a; color: white; font-family: sans-serif; padding: 30px; }
        .container { max-width: 1000px; margin: auto; }
        table { width: 100%; border-collapse: collapse; background: #1e293b; border-radius: 10px; }
        th, td { padding: 15px; text-align: left; border-bottom: 1px solid #334155; }
        th { color: #94a3b8; font-size: 13px; }
        .ca { color: #22c55e; font-weight: bold; }
        .btn-mail { background: #f59e0b; color: white; padding: 8px 12px; border-radius: 5px; text-decoration: none; font-size: 12px; }
        .btn-mail:hover { opacity: 0.8; }
    </style>
</head>
<body>

<div class="container">
    <h2>Moniteur d'ActivitÃ©</h2>

    <table>
        <thead>
            <tr>
                <th>Utilisateur</th>
                <th>CA Total</th>
                <th>ActivitÃ©</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for u in users %}
            <tr>
                <td>
                    <strong>{{ u.username }}</strong><br>
                    <span style="font-size: 11px; color: #64748b;">{{ u.email }}</span>
                </td>
                <td class="ca">{{ "{:,.2f}".format(u.ca) }} â‚¬</td>
                <td>
                    {% if u.last_active is string %}
                        {{ u.last_active }}
                    {% else %}
                        {{ u.last_active.strftime('%d/%m/%Y') }}
                    {% endif %}
                </td>
                <td>
                    <a href="{{ url_for('admin_send_ping', user_id=u.id) }}" class="btn-mail">
                        ðŸ“§ Relancer par Mail
                    </a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

</body>
</html>