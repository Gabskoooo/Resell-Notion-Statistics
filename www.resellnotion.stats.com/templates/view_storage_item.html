{% extends 'base.html' %}

{% block content %}
<style>
    .premium-card {
        background: var(--glass-bg);
        border: 1px solid var(--glass-border);
        border-radius: 32px;
        padding: 50px;
        backdrop-filter: blur(15px);
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.6);
    }

    .label-caps {
        text-transform: uppercase;
        letter-spacing: 1.5px;
        font-size: 0.7rem;
        color: rgba(255,255,255,0.4);
        margin-bottom: 12px;
        display: block;
    }

    .content-box {
        background: rgba(255, 255, 255, 0.02);
        border: 1px solid var(--glass-border);
        border-radius: 20px;
        padding: 25px;
        color: #cbd5e1;
        line-height: 1.8;
    }

    .file-zone {
        border: 1px dashed var(--primary-glow);
        background: rgba(138, 43, 226, 0.03);
        border-radius: 24px;
        padding: 40px;
        transition: 0.3s;
    }

    .btn-cyber-action {
        background: linear-gradient(135deg, var(--primary-glow), #6a11cb);
        border: none;
        color: white;
        padding: 15px 40px;
        border-radius: 50px;
        font-weight: 700;
        letter-spacing: 1px;
        transition: 0.3s;
        text-transform: uppercase;
        text-decoration: none;
        display: inline-block;
    }

    .btn-cyber-action:hover {
        transform: translateY(-3px);
        box-shadow: 0 10px 25px rgba(138, 43, 226, 0.4);
        color: white;
    }
</style>

<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-lg-9">
            <div class="premium-card">
                <div class="d-flex justify-content-between align-items-center mb-5">
                    <a href="{{ url_for('storage') }}" class="text-decoration-none fw-bold" style="color: var(--primary-glow);">
                        <i class="bi bi-arrow-left me-2"></i>RETOUR AU CLOUD
                    </a>
                    <span class="badge rounded-pill px-3 py-2" style="background: rgba(0, 255, 163, 0.1); color: var(--success-glow); border: 1px solid rgba(0, 255, 163, 0.2);">
                        {{ item.category | upper }}
                    </span>
                </div>

                <h1 class="text-white fw-bold mb-5">{{ item.title }}</h1>

                {% if item.content %}
                <div class="mb-5">
                    <span class="label-caps">Notes & Informations</span>
                    <div class="content-box">
                        <p style="white-space: pre-wrap; margin-bottom: 0;">{{ item.content }}</p>
                    </div>
                </div>
                {% endif %}

                {% if item.file_path %}
                <div class="mb-5">
                    <span class="label-caps">Document Associé</span>
                    <div class="file-zone text-center">
                        <i class="bi bi-file-earmark-richtext text-primary mb-3" style="font-size: 3.5rem; filter: drop-shadow(0 0 10px rgba(138, 43, 226, 0.3));"></i>
                        <h4 class="text-white mb-4">Transmission Prête</h4>
                        <a href="{{ url_for('get_storage_file', item_id=item.id) }}" target="_blank" class="btn-cyber-action">
                            <i class="bi bi-eye-fill me-2"></i>Ouvrir le fichier
                        </a>
                        <p class="text-muted small mt-4">
                            Fichier stocké sur votre instance sécurisée.
                        </p>
                    </div>
                </div>
                {% endif %}

                <div class="mt-5 pt-4 border-top border-secondary border-opacity-25 d-flex justify-content-between align-items-center text-muted small">
                    <div>Enregistré le {{ item.created_at.strftime('%d/%m/%Y à %H:%M') }}</div>
                    <form action="{{ url_for('delete_storage_item', item_id=item.id) }}" method="POST" onsubmit="return confirm('Supprimer définitivement ?');">
                        <button type="submit" class="btn btn-link text-danger text-decoration-none p-0">SUPPRIMER</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}